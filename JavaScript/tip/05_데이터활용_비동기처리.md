# 프론트엔드 비동기 처리 정리

프론트엔드 개발에서 데이터는 핵심 자원이다.  
데이터를 가져오고 사용하는 과정은 대부분 **비동기 작업**으로 이루어진다.  
이를 다루기 위해 **Promise → async/await → 상태 관리** 흐름을 반드시 이해해야 한다.

---

## 1. 데이터와 비동기

- 프론트엔드는 데이터를 **API 서버**에서 가져온다.
- API 호출은 시간이 걸리므로 **비동기 작업**으로 처리된다.
- 비동기를 다루는 기본 도구가 **Promise**이다.

---

## 2. Promise 기본

**정의**

> 비동기 작업의 완료(fulfilled) 또는 실패(rejected)를 나타내는 객체

**상태 (state)**

- `pending` (대기 중)
- `fulfilled` (성공)
- `rejected` (실패)

```js
const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve("성공!");
    // reject("실패!");
  }, 1000);
});

promise
  .then((value) => console.log(value)) // 성공
  .catch((err) => console.error(err)) // 실패
  .finally(() => console.log("끝"));
```

---

## 3. async / await

Promise를 더 직관적으로 사용하는 문법.

- `async`: 함수가 무조건 **Promise**를 반환하도록 함
- `await`: Promise가 끝날 때까지 기다리고 결과 값을 꺼냄
- 오류 처리: `try { } catch { } finally { }`

```js
async function getData() {
  try {
    const res = await fetch("https://jsonplaceholder.typicode.com/posts/1");
    const data = await res.json(); // JSON 파싱도 Promise
    console.log(data);
  } catch (err) {
    console.error("에러:", err);
  } finally {
    console.log("작업 종료");
  }
}
```

---

## 4. React에서의 활용

리액트는 **Promise 객체를 직접 state에 저장하지 않는다.**  
대신 **Promise의 결과 값**을 상태(state)에 저장하고, 로딩/에러 상태를 UI에 반영한다.

```js
import { useEffect, useState } from "react";

function App() {
  const [state, setState] = useState({
    loading: true,
    data: null,
    error: null,
  });

  useEffect(() => {
    (async () => {
      try {
        const res = await fetch("https://jsonplaceholder.typicode.com/posts/1");
        if (!res.ok) throw new Error("네트워크 에러");
        const data = await res.json();
        setState({ loading: false, data, error: null });
      } catch (err) {
        setState({ loading: false, data: null, error });
      }
    })();
  }, []);

  if (state.loading) return <p>로딩 중...</p>;
  if (state.error) return <p>에러 발생: {String(state.error)}</p>;
  return <div>{state.data.title}</div>;
}
```

---

## 5. 요약

✅ 프론트엔드는 데이터를 많이 다룬다  
✅ 데이터 요청은 비동기 → Promise 필요  
✅ `async/await`로 직관적인 코드 작성 가능  
✅ 오류 처리는 `try/catch/finally`  
✅ React에서는 **Promise → 결과 값(state) → UI 반영**

---

## 6. 추가 학습 키워드

- `Promise.all`, `Promise.allSettled`, `Promise.race`
- `AbortController`로 API 요청 취소하기
- 로딩/에러/성공 상태 관리 패턴
- React Query 같은 데이터 관리 라이브러리
